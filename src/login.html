<!DOCTYPE html>

<html class="light" lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Login | ShopModern</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#137fec",
                        "background-light": "#f6f7f8",
                        "background-dark": "#101922",
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.25rem",
                        "lg": "0.5rem",
                        "xl": "0.75rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
    <!-- Firebase SDK - Compat version for easier integration -->
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
    <script src="./auth.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>

<body
    class="bg-background-light dark:bg-background-dark min-h-screen flex flex-col font-display transition-colors duration-300">
    <!-- Top Navigation Bar -->
    <header
        class="flex items-center justify-between whitespace-nowrap border-b border-solid border-[#e7edf3] dark:border-slate-800 px-6 lg:px-10 py-3 bg-white dark:bg-slate-900 w-full">
        <div class="flex items-center gap-4 text-[#0d141b] dark:text-white">
            <div class="size-6 text-primary">
                <svg fill="none" viewbox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                    <path d="M6 6H42L36 24L42 42H6L12 24L6 6Z" fill="currentColor"></path>
                </svg>
            </div>
            <h2 class="text-[#0d141b] dark:text-white text-lg font-bold leading-tight tracking-[-0.015em]">ShopModern
            </h2>
        </div>
        <div class="flex flex-1 justify-end gap-8">
            <div class="hidden md:flex items-center gap-9">
                <a class="text-[#0d141b] dark:text-slate-300 text-sm font-medium leading-normal hover:text-primary transition-colors"
                    href="#">Home</a>
                <a class="text-[#0d141b] dark:text-slate-300 text-sm font-medium leading-normal hover:text-primary transition-colors"
                    href="#">Shop</a>
                <a class="text-[#0d141b] dark:text-slate-300 text-sm font-medium leading-normal hover:text-primary transition-colors"
                    href="#">About</a>
                <a class="text-[#0d141b] dark:text-slate-300 text-sm font-medium leading-normal hover:text-primary transition-colors"
                    href="#">Contact</a>
            </div>
            <button
                class="p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-600 dark:text-slate-400"
                onclick="document.documentElement.classList.toggle('dark')">
                <span class="material-symbols-outlined">dark_mode</span>
            </button>
        </div>
    </header>
    <!-- Main Content Area -->
    <main class="flex-1 flex items-center justify-center px-4 py-12">
        <div class="w-full max-w-[440px] flex flex-col gap-6">
            <!-- Login Card -->
            <div
                class="bg-white dark:bg-slate-900 shadow-xl rounded-xl p-8 border border-[#e7edf3] dark:border-slate-800">
                <!-- Card Header -->
                <div class="flex flex-col items-center mb-8 text-center">
                    <div class="size-12 bg-primary/10 rounded-xl flex items-center justify-center text-primary mb-4">
                        <span class="material-symbols-outlined text-3xl">shopping_bag</span>
                    </div>
                    <h1 class="text-[#0d141b] dark:text-white text-2xl font-bold leading-tight tracking-[-0.015em]">
                        Login to Your Account</h1>
                    <p class="text-[#4c739a] dark:text-slate-400 text-sm font-normal leading-normal mt-2">Enter your
                        credentials to access your dashboard.</p>
                </div>
                <!-- Login Form -->
                <form id="loginForm" class="space-y-5">
                    <!-- Email Field -->
                    <div class="flex flex-col gap-2">
                        <label class="text-[#0d141b] dark:text-slate-200 text-sm font-medium leading-normal">Email
                            Address</label>
                        <div class="relative">
                            <span
                                class="material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 text-xl">mail</span>
                            <input
                                id="email"
                                class="flex w-full min-w-0 flex-1 rounded-lg text-[#0d141b] dark:text-white focus:outline-0 focus:ring-2 focus:ring-primary/20 border border-[#cfdbe7] dark:border-slate-700 bg-white dark:bg-slate-800 focus:border-primary h-12 pl-12 pr-4 placeholder:text-[#4c739a] dark:placeholder:text-slate-500 text-base font-normal transition-all"
                                placeholder="name@company.com" required="" type="email" />
                        </div>
                    </div>
                    <!-- Password Field -->
                    <div class="flex flex-col gap-2">
                        <div class="flex items-center justify-between">
                            <label
                                class="text-[#0d141b] dark:text-slate-200 text-sm font-medium leading-normal">Password</label>
                            <a class="text-primary text-xs font-semibold hover:underline" href="#">Forgot password?</a>
                        </div>
                        <div class="relative">
                            <span
                                class="material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 text-xl">lock</span>
                            <input
                                id="password"
                                class="flex w-full min-w-0 flex-1 rounded-lg text-[#0d141b] dark:text-white focus:outline-0 focus:ring-2 focus:ring-primary/20 border border-[#cfdbe7] dark:border-slate-700 bg-white dark:bg-slate-800 focus:border-primary h-12 pl-12 pr-12 placeholder:text-[#4c739a] dark:placeholder:text-slate-500 text-base font-normal transition-all"
                                placeholder="Enter your password" required="" type="password" />
                            <button
                                class="absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200"
                                type="button">
                                <span class="material-symbols-outlined text-xl">visibility</span>
                            </button>
                        </div>
                    </div>
                    <!-- Action Buttons -->
                    <div class="flex flex-col gap-3 pt-4">
                        <button
                            class="flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-5 bg-primary hover:bg-primary/90 text-white text-base font-bold leading-normal tracking-[0.015em] w-full transition-colors shadow-sm"
                            type="submit">
                            <span class="truncate">Sign In</span>
                        </button>
                        <div class="relative py-2 flex items-center justify-center">
                            <div class="absolute inset-0 flex items-center">
                                <span class="w-full border-t border-slate-200 dark:border-slate-800"></span>
                            </div>
                            <span
                                class="relative px-3 bg-white dark:bg-slate-900 text-xs text-slate-400 uppercase tracking-widest font-medium">Or
                                continue with</span>
                        </div>
                        <button
                            class="flex min-w-[84px] cursor-pointer items-center justify-center gap-3 overflow-hidden rounded-lg h-12 px-5 bg-white dark:bg-slate-800 border border-[#cfdbe7] dark:border-slate-700 text-[#0d141b] dark:text-white text-base font-semibold leading-normal tracking-[0.015em] w-full hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors"
                            type="button">
                            <img alt="" class="size-5" data-alt="Google colorful brand logo icon"
                                src="https://lh3.googleusercontent.com/aida-public/AB6AXuDnwgz1lvGY56E5ehqVLV8BgDEOl6fJpDWfCWR-Kk588eLYvotTI60jcH_NC4_jOWMLsc1GfCpxhlFkwe7-L25s8x3b5rrpA1M4rhu1WCKVHVDOvCUOQzCceTXAjTZ-iHnXrVeIkoT0gSrHxz906T3G3SZEeS26pqngBu1U_NBJZGk9m0cHBl2ibsb4RxmiBAE_fY7UPsbAS_IS1MTAvs5HFzzJIOgeleI2Ueaj1tpUw1LnBe9Xc2QGXiy-jg01jQC-XEBWfqpAfw" />
                            <span class="truncate">Sign in with Google</span>
                        </button>
                    </div>
                </form>
                <!-- Signup Footer -->
                <div class="mt-8 text-center">
                    <p class="text-sm text-slate-500 dark:text-slate-400">
                        Don't have an account?
                        <a class="text-primary font-semibold hover:underline" href="register.html">Create an account</a>
                    </p>
                </div>
            </div>
            <!-- Trust Badges / Info (Agile Sprint Context) -->
            <div class="flex justify-center gap-6 opacity-60 grayscale hover:grayscale-0 transition-all duration-300">
                <div class="flex items-center gap-2 text-slate-600 dark:text-slate-400">
                    <span class="material-symbols-outlined text-lg">verified_user</span>
                    <span class="text-[10px] uppercase font-bold tracking-widest">Secure Checkout</span>
                </div>
                <div class="flex items-center gap-2 text-slate-600 dark:text-slate-400">
                    <span class="material-symbols-outlined text-lg">local_shipping</span>
                    <span class="text-[10px] uppercase font-bold tracking-widest">Fast Delivery</span>
                </div>
            </div>
        </div>
    </main>
    <!-- Simple Footer -->
    <footer class="px-6 py-8 border-t border-[#e7edf3] dark:border-slate-800 text-center">
        <p class="text-slate-400 text-xs font-normal">
            Â© 2024 ShopModern Platform. Sprint Demo v1.0. All rights reserved.
        </p>
    </footer>
    <script>
        // Wait for everything to load
        window.addEventListener('load', function() {
            console.log('Page loaded, initializing...');
            
            // Wait a bit to ensure all scripts are loaded
            setTimeout(function() {
                console.log('Checking for auth module:', typeof window.auth);
                
                if (!window.auth) {
                    console.error('Auth module not found!');
                    alert('Error: Authentication module not loaded. Please refresh the page.');
                    return;
                }

                // Initialize Firebase
                console.log('Initializing Firebase...');
                const fbAuth = window.auth.initFirebase();
                if (!fbAuth) {
                    console.error('Failed to initialize Firebase');
                    alert('Error: Failed to initialize Firebase. Please check your configuration and refresh.');
                    return;
                }

                const loginForm = document.getElementById('loginForm');
                console.log('Login form found:', !!loginForm);
                
                // Also attach to button click as backup
                const submitBtn = loginForm ? loginForm.querySelector('button[type="submit"]') : null;
                if (submitBtn) {
                    console.log('Submit button found:', true);
                    submitBtn.addEventListener('click', function(e) {
                        console.log('Submit button clicked!');
                    });
                }
                
                if (loginForm) {
                    console.log('Attaching submit event listener to form...');
                    loginForm.addEventListener('submit', async (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        console.log('Form submit event triggered');

                        const emailInput = document.getElementById('email');
                        const passwordInput = document.getElementById('password');

                        console.log('Input elements:', {
                            email: !!emailInput,
                            password: !!passwordInput
                        });

                        if (!emailInput || !passwordInput) {
                            alert('Error: Form inputs not found. Please refresh the page.');
                            return;
                        }

                        const email = emailInput.value.trim();
                        const password = passwordInput.value;

                        if (!email || !password) {
                            alert('Please fill in all fields');
                            return;
                        }

                        console.log('Submitting login for:', email);
                        
                        // Disable submit button to prevent double submission
                        const submitBtn = loginForm.querySelector('button[type="submit"]');
                        if (submitBtn) {
                            submitBtn.disabled = true;
                            const btnSpan = submitBtn.querySelector('span');
                            if (btnSpan) {
                                btnSpan.textContent = 'Signing In...';
                            } else {
                                submitBtn.textContent = 'Signing In...';
                            }
                        }

                        try {
                            const { data, error } = await window.auth.signIn(email, password);

                            if (error) {
                                console.error('Login failed:', error);
                                alert('Error signing in: ' + (error.message || JSON.stringify(error)));
                            } else {
                                console.log('Login success:', data);
                                alert('Login successful! Redirecting...');
                                window.location.href = 'productList.html';
                            }
                        } catch (err) {
                            console.error('Unexpected error:', err);
                            alert('An unexpected error occurred: ' + err.message);
                        } finally {
                            // Re-enable submit button
                            if (submitBtn) {
                                submitBtn.disabled = false;
                                const btnSpan = submitBtn.querySelector('span');
                                if (btnSpan) {
                                    btnSpan.textContent = 'Sign In';
                                } else {
                                    submitBtn.textContent = 'Sign In';
                                }
                            }
                        }
                    });
                    console.log('Form event listener attached successfully');
                } else {
                    console.error('Login form not found!');
                    alert('Error: Login form not found. Please refresh the page.');
                }
            }, 500); // Wait 500ms for scripts to fully load
        });
    </script>
</body>

</html>